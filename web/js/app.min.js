'use strict';(function($,window,document,undefined){'use strict';$.fn.simpleLightbox=function(options){var options=$.extend({overlay:!0,spinner:!0,nav:!0,navText:['&lsaquo;','&rsaquo;'],captions:!0,captionDelay:0,captionSelector:'img',captionType:'attr',captionsData:'title',captionPosition:'bottom',close:!0,closeText:'Ã—',swipeClose:!0,showCounter:!0,fileExt:'png|jpg|jpeg|gif',animationSlide:!0,animationSpeed:250,preloading:!0,enableKeyboard:!0,loop:!0,rel:!1,docClose:!0,swipeTolerance:50,className:'simple-lightbox',widthRatio:0.8,heightRatio:0.9,disableRightClick:!1,disableScroll:!0,alertError:!0,alertErrorMessage:'Image not found, next image will be loaded',additionalHtml:!1},options);var touchDevice=('ontouchstart' in window),pointerEnabled=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,touched=function(event){if(touchDevice)return !0;if(!pointerEnabled||typeof event==='undefined'||typeof event.pointerType==='undefined')
return !1;if(typeof event.MSPOINTER_TYPE_MOUSE!=='undefined'){if(event.MSPOINTER_TYPE_MOUSE!=event.pointerType)
return !0}
else if(event.pointerType!='mouse')
return !0;return !1},swipeDiff=0,swipeYDiff=0,curImg=$(),transPrefix=function(){var s=document.body||document.documentElement,s=s.style;if(s.WebkitTransition=='')return '-webkit-';if(s.MozTransition=='')return '-moz-';if(s.OTransition=='')return '-o-';if(s.transition=='')return '';return !1},opened=!1,loaded=[],getRelated=function(rel,jqObj){var $related=$(jqObj.selector).filter(function(){return($(this).attr('rel')===rel)});return $related},objects=(options.rel&&options.rel!==!1)?getRelated(options.rel,this):this,transPrefix=transPrefix(),canTransisions=(transPrefix!==!1)?!0:!1,prefix='simplelb',overlay=$('<div>').addClass('sl-overlay'),closeBtn=$('<button>').addClass('sl-close').html(options.closeText),spinner=$('<div>').addClass('sl-spinner').html('<div></div>'),nav=$('<div>').addClass('sl-navigation').html('<button class="sl-prev">'+options.navText[0]+'</button><button class="sl-next">'+options.navText[1]+'</button>'),counter=$('<div>').addClass('sl-counter').html('<span class="sl-current"></span>/<span class="sl-total"></span>'),animating=!1,index=0,caption=$('<div>').addClass('sl-caption pos-'+options.captionPosition),image=$('<div>').addClass('sl-image'),wrapper=$('<div>').addClass('sl-wrapper').addClass(options.className),isValidLink=function(element){if(!options.fileExt)return !0;return $(element).prop('tagName').toLowerCase()=='a'&&(new RegExp('\.('+options.fileExt+')$','i')).test($(element).attr('href'))},setup=function(){if(options.close)closeBtn.appendTo(wrapper);if(options.showCounter){if(objects.length>1){counter.appendTo(wrapper);counter.find('.sl-total').text(objects.length)}}
if(options.nav)nav.appendTo(wrapper);if(options.spinner)spinner.appendTo(wrapper)},openImage=function(elem){elem.trigger($.Event('show.simplelightbox'));if(options.disableScroll)handleScrollbar('hide');wrapper.appendTo('body');image.appendTo(wrapper);if(options.overlay)overlay.appendTo($('body'));animating=!0;index=objects.index(elem);curImg=$('<img/>').hide().attr('src',elem.attr('href'));if(loaded.indexOf(elem.attr('href'))==-1){loaded.push(elem.attr('href'))}
image.html('').attr('style','');curImg.appendTo(image);addEvents();overlay.fadeIn('fast');$('.sl-close').fadeIn('fast');spinner.show();nav.fadeIn('fast');$('.sl-wrapper .sl-counter .sl-current').text(index+1);counter.fadeIn('fast');adjustImage();if(options.preloading)preload();setTimeout(function(){elem.trigger($.Event('shown.simplelightbox'))},options.animationSpeed)},adjustImage=function(dir){if(!curImg.length)return;var tmpImage=new Image(),windowWidth=$(window).width()*options.widthRatio,windowHeight=$(window).height()*options.heightRatio;tmpImage.src=curImg.attr('src');$(tmpImage).bind('error',function(ev){objects.eq(index).trigger($.Event('error.simplelightbox'))
animating=!1;opened=!0;spinner.hide();if(options.alertError){alert(options.alertErrorMessage);if(dir==1||dir==-1){loadImage(dir)}else{loadImage(1)}
return}})
tmpImage.onload=function(){if(typeof dir!=='undefined'){objects.eq(index).trigger($.Event('changed.simplelightbox')).trigger($.Event((dir===1?'nextDone':'prevDone')+'.simplelightbox'))}
if(loaded.indexOf(curImg.attr('src'))==-1){loaded.push(curImg.attr('src'))}
var imageWidth=tmpImage.width,imageHeight=tmpImage.height;if(imageWidth>windowWidth||imageHeight>windowHeight){var ratio=imageWidth/imageHeight>windowWidth/windowHeight?imageWidth/windowWidth:imageHeight/windowHeight;imageWidth/=ratio;imageHeight/=ratio}
$('.sl-image').css({'top':($(window).height()-imageHeight)/2+'px','left':($(window).width()-imageWidth)/2+'px'});spinner.hide();curImg.css({'width':imageWidth+'px','height':imageHeight+'px'}).fadeIn('fast');opened=!0;var cSel=(options.captionSelector=='self')?objects.eq(index):objects.eq(index).find(options.captionSelector);if(options.captionType=='data'){var captionText=cSel.data(options.captionsData)}else if(options.captionType=='text'){var captionText=cSel.html()}else{var captionText=cSel.prop(options.captionsData)}
if(!options.loop){if(index==0){$('.sl-prev').hide()}
if(index>=objects.length-1){$('.sl-next').hide()}
if(index>0){$('.sl-prev').show()}
if(index<objects.length-1){$('.sl-next').show()}}
if(objects.length==1)$('.sl-prev, .sl-next').hide();if(dir==1||dir==-1){var css={'opacity':1.0};if(options.animationSlide){if(canTransisions){slide(0,100*dir+'px');setTimeout(function(){slide(options.animationSpeed/1000,0+'px'),50})}
else{css.left=parseInt($('.sl-image').css('left'))+100*dir+'px'}}
$('.sl-image').animate(css,options.animationSpeed,function(){animating=!1;setCaption(captionText)})}else{animating=!1;setCaption(captionText)}
if(options.additionalHtml&&$('.sl-additional-html').length==0){$('<div>').html(options.additionalHtml).addClass('sl-additional-html').appendTo($('.sl-image'))}}},setCaption=function(captiontext){if(captiontext!=''&&typeof captiontext!=="undefined"&&options.captions){caption.html(captiontext).hide().appendTo($('.sl-image')).delay(options.captionDelay).fadeIn('fast')}},slide=function(speed,pos){var styles={};styles[transPrefix+'transform']='translateX('+pos+')';styles[transPrefix+'transition']=transPrefix+'transform '+speed+'s linear';$('.sl-image').css(styles)},addEvents=function(){$(window).on('resize.'+prefix,adjustImage);$(document).on('click.'+prefix+' touchstart.'+prefix,'.sl-close',function(e){e.preventDefault();if(opened){close()}});nav.on('click.'+prefix,'button',function(e){e.preventDefault();swipeDiff=0;loadImage($(this).hasClass('sl-next')?1:-1)});var swipeStart=0,swipeEnd=0,swipeYStart=0,swipeYEnd=0,mousedown=!1,imageLeft=0;image.on('touchstart.'+prefix+' mousedown.'+prefix,function(e){if(mousedown)return !0;if(canTransisions)imageLeft=parseInt(image.css('left'));mousedown=!0;swipeStart=e.originalEvent.pageX||e.originalEvent.touches[0].pageX;swipeYStart=e.originalEvent.pageY||e.originalEvent.touches[0].pageY;return !1}).on('touchmove.'+prefix+' mousemove.'+prefix+' pointermove MSPointerMove',function(e){if(!mousedown)return !0;e.preventDefault();swipeEnd=e.originalEvent.pageX||e.originalEvent.touches[0].pageX;swipeYEnd=e.originalEvent.pageY||e.originalEvent.touches[0].pageY;swipeDiff=swipeStart-swipeEnd;swipeYDiff=swipeYStart-swipeYEnd;if(options.animationSlide){if(canTransisions)slide(0,-swipeDiff+'px');else image.css('left',imageLeft-swipeDiff+'px')}}).on('touchend.'+prefix+' mouseup.'+prefix+' touchcancel.'+prefix+' mouseleave.'+prefix+' pointerup pointercancel MSPointerUp MSPointerCancel',function(e){if(mousedown){mousedown=!1;var possibleDir=!0;if(!options.loop){if(index==0&&swipeDiff<0){possibleDir=!1}
if(index>=objects.length-1&&swipeDiff>0){possibleDir=!1}}
if(Math.abs(swipeDiff)>options.swipeTolerance&&possibleDir){loadImage(swipeDiff>0?1:-1)}
else if(options.animationSlide){if(canTransisions)slide(options.animationSpeed/1000,0+'px');else image.animate({'left':imageLeft+'px'},options.animationSpeed/2)}
if(options.swipeClose&&Math.abs(swipeYDiff)>50&&Math.abs(swipeDiff)<options.swipeTolerance){close()}}})},removeEvents=function(){nav.off('click','button');$(document).off('click.'+prefix,'.sl-close');$(window).off('resize.'+prefix)},preload=function(){var next=(index+1<0)?objects.length-1:(index+1>=objects.length-1)?0:index+1,prev=(index-1<0)?objects.length-1:(index-1>=objects.length-1)?0:index-1;$('<img />').attr('src',objects.eq(next).attr('href')).load(function(){if(loaded.indexOf($(this).attr('src'))==-1){loaded.push($(this).attr('src'))}
objects.eq(index).trigger($.Event('nextImageLoaded.simplelightbox'))});$('<img />').attr('src',objects.eq(prev).attr('href')).load(function(){if(loaded.indexOf($(this).attr('src'))==-1){loaded.push($(this).attr('src'))}
objects.eq(index).trigger($.Event('prevImageLoaded.simplelightbox'))})},loadImage=function(dir){objects.eq(index).trigger($.Event('change.simplelightbox')).trigger($.Event((dir===1?'next':'prev')+'.simplelightbox'));var newIndex=index+dir;if(animating||(newIndex<0||newIndex>=objects.length)&&options.loop==!1)return;index=(newIndex<0)?objects.length-1:(newIndex>objects.length-1)?0:newIndex;$('.sl-wrapper .sl-counter .sl-current').text(index+1);var css={'opacity':0};if(options.animationSlide){if(canTransisions)slide(options.animationSpeed/1000,(-100*dir)-swipeDiff+'px');else css.left=parseInt($('.sl-image').css('left'))+ -100*dir+'px'}
$('.sl-image').animate(css,options.animationSpeed,function(){setTimeout(function(){var elem=objects.eq(index);curImg.attr('src',elem.attr('href'));if(loaded.indexOf(elem.attr('href'))==-1){spinner.show()}
$('.sl-caption').remove();adjustImage(dir);if(options.preloading)preload()},100)})},close=function(){if(animating)return;var elem=objects.eq(index),triggered=!1;elem.trigger($.Event('close.simplelightbox'));$('.sl-image img, .sl-overlay, .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter').fadeOut('fast',function(){if(options.disableScroll)handleScrollbar('show');$('.sl-wrapper, .sl-overlay').remove();removeEvents();if(!triggered)elem.trigger($.Event('closed.simplelightbox'));triggered=!0});curImg=$();opened=!1;animating=!1},handleScrollbar=function(type){if(type=='hide'){var fullWindowWidth=window.innerWidth;if(!fullWindowWidth){var documentElementRect=document.documentElement.getBoundingClientRect()
fullWindowWidth=documentElementRect.right-Math.abs(documentElementRect.left)}
if(document.body.clientWidth<fullWindowWidth){var scrollDiv=document.createElement('div'),padding=parseInt($('body').css('padding-right'),10);scrollDiv.className='sl-scrollbar-measure';$('body').append(scrollDiv);var scrollbarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth;$(document.body)[0].removeChild(scrollDiv);$('body').data('padding',padding);if(scrollbarWidth>0){$('body').addClass('hidden-scroll').css({'padding-right':padding+scrollbarWidth})}}}else{$('body').removeClass('hidden-scroll').css({'padding-right':$('body').data('padding')})}}
setup();objects.on('click.'+prefix,function(e){if(isValidLink(this)){e.preventDefault();if(animating)return !1;openImage($(this))}});$(document).on('click.'+prefix+' touchstart.'+prefix,function(e){if(opened){if((options.docClose&&$(e.target).closest('.sl-image').length==0&&$(e.target).closest('.sl-navigation').length==0)){close()}}});if(options.disableRightClick){$(document).on('contextmenu','.sl-image img',function(e){return !1})}
if(options.enableKeyboard){$(document).on('keyup.'+prefix,function(e){e.preventDefault();swipeDiff=0;if(opened){var key=e.keyCode;if(key==27){close()}
if(key==37||e.keyCode==39){loadImage(e.keyCode==39?1:-1)}}})}
this.open=function(elem){elem=elem||$(this[0]);openImage(elem)}
this.next=function(){loadImage(1)}
this.prev=function(){loadImage(-1)}
this.close=function(){close()}
this.destroy=function(){$(document).unbind('click.'+prefix).unbind('keyup.'+prefix);close();$('.sl-overlay, .sl-wrapper').remove();this.off('click')}
this.refresh=function(){this.destroy();$(this.selector).simpleLightbox(options)}
return this}})(jQuery,window,document);(function(doc,win){var watchArray=[],scroll,initialized=!1,html=doc.documentElement,noop=function(){},checkTimer,hiddenPropertyName='hidden',visibilityChangeEventName='visibilitychange';if(doc.webkitHidden!==undefined){hiddenPropertyName='webkitHidden';visibilityChangeEventName='webkitvisibilitychange'}
if(!win.getComputedStyle){seppuku()}
var prefixes=['','-webkit-','-moz-','-ms-'],block=document.createElement('div');for(var i=prefixes.length-1;i>=0;i--){try{block.style.position=prefixes[i]+'sticky'}
catch(e){}
if(block.style.position!=''){seppuku()}}
updateScrollPos();function seppuku(){init=add=rebuild=pause=stop=kill=noop}
function mergeObjects(targetObj,sourceObject){for(var key in sourceObject){if(sourceObject.hasOwnProperty(key)){targetObj[key]=sourceObject[key]}}}
function parseNumeric(val){return parseFloat(val)||0}
function updateScrollPos(){scroll={top:win.pageYOffset,left:win.pageXOffset}}
function onScroll(){if(win.pageXOffset!=scroll.left){updateScrollPos();rebuild();return}
if(win.pageYOffset!=scroll.top){updateScrollPos();recalcAllPos()}}
function onWheel(event){setTimeout(function(){if(win.pageYOffset!=scroll.top){scroll.top=win.pageYOffset;recalcAllPos()}},0)}
function recalcAllPos(){for(var i=watchArray.length-1;i>=0;i--){recalcElementPos(watchArray[i])}}
function recalcElementPos(el){if(!el.inited)return;var currentMode=(scroll.top<=el.limit.start?0:scroll.top>=el.limit.end?2:1);if(el.mode!=currentMode){switchElementMode(el,currentMode)}}
function fastCheck(){for(var i=watchArray.length-1;i>=0;i--){if(!watchArray[i].inited)continue;var deltaTop=Math.abs(getDocOffsetTop(watchArray[i].clone)-watchArray[i].docOffsetTop),deltaHeight=Math.abs(watchArray[i].parent.node.offsetHeight-watchArray[i].parent.height);if(deltaTop>=2||deltaHeight>=2)return !1}
return !0}
function initElement(el){if(isNaN(parseFloat(el.computed.top))||el.isCell||el.computed.display=='none')return;el.inited=!0;if(!el.clone)clone(el);if(el.parent.computed.position!='absolute'&&el.parent.computed.position!='relative')el.parent.node.style.position='relative';recalcElementPos(el);el.parent.height=el.parent.node.offsetHeight;el.docOffsetTop=getDocOffsetTop(el.clone)}
function deinitElement(el){var deinitParent=!0;el.clone&&killClone(el);mergeObjects(el.node.style,el.css);for(var i=watchArray.length-1;i>=0;i--){if(watchArray[i].node!==el.node&&watchArray[i].parent.node===el.parent.node){deinitParent=!1;break}};if(deinitParent)el.parent.node.style.position=el.parent.css.position;el.mode=-1}
function initAll(){for(var i=watchArray.length-1;i>=0;i--){initElement(watchArray[i])}}
function deinitAll(){for(var i=watchArray.length-1;i>=0;i--){deinitElement(watchArray[i])}}
function switchElementMode(el,mode){var nodeStyle=el.node.style;switch(mode){case 0:nodeStyle.position='absolute';nodeStyle.left=el.offset.left+'px';nodeStyle.right=el.offset.right+'px';nodeStyle.top=el.offset.top+'px';nodeStyle.bottom='auto';nodeStyle.width='auto';nodeStyle.marginLeft=0;nodeStyle.marginRight=0;nodeStyle.marginTop=0;break;case 1:nodeStyle.position='fixed';nodeStyle.left=el.box.left+'px';nodeStyle.right=el.box.right+'px';nodeStyle.top=el.css.top;nodeStyle.bottom='auto';nodeStyle.width='auto';nodeStyle.marginLeft=0;nodeStyle.marginRight=0;nodeStyle.marginTop=0;break;case 2:nodeStyle.position='absolute';nodeStyle.left=el.offset.left+'px';nodeStyle.right=el.offset.right+'px';nodeStyle.top='auto';nodeStyle.bottom=0;nodeStyle.width='auto';nodeStyle.marginLeft=0;nodeStyle.marginRight=0;break}
el.mode=mode}
function clone(el){el.clone=document.createElement('div');var refElement=el.node.nextSibling||el.node,cloneStyle=el.clone.style;cloneStyle.height=el.height+'px';cloneStyle.width=el.width+'px';cloneStyle.marginTop=el.computed.marginTop;cloneStyle.marginBottom=el.computed.marginBottom;cloneStyle.marginLeft=el.computed.marginLeft;cloneStyle.marginRight=el.computed.marginRight;cloneStyle.padding=cloneStyle.border=cloneStyle.borderSpacing=0;cloneStyle.fontSize='1em';cloneStyle.position='static';cloneStyle.cssFloat=el.computed.cssFloat;el.node.parentNode.insertBefore(el.clone,refElement)}
function killClone(el){el.clone.parentNode.removeChild(el.clone);el.clone=undefined}
function getElementParams(node){var computedStyle=getComputedStyle(node),parentNode=node.parentNode,parentComputedStyle=getComputedStyle(parentNode),cachedPosition=node.style.position;node.style.position='relative';var computed={top:computedStyle.top,marginTop:computedStyle.marginTop,marginBottom:computedStyle.marginBottom,marginLeft:computedStyle.marginLeft,marginRight:computedStyle.marginRight,cssFloat:computedStyle.cssFloat,display:computedStyle.display},numeric={top:parseNumeric(computedStyle.top),marginBottom:parseNumeric(computedStyle.marginBottom),paddingLeft:parseNumeric(computedStyle.paddingLeft),paddingRight:parseNumeric(computedStyle.paddingRight),borderLeftWidth:parseNumeric(computedStyle.borderLeftWidth),borderRightWidth:parseNumeric(computedStyle.borderRightWidth)};node.style.position=cachedPosition;var css={position:node.style.position,top:node.style.top,bottom:node.style.bottom,left:node.style.left,right:node.style.right,width:node.style.width,marginTop:node.style.marginTop,marginLeft:node.style.marginLeft,marginRight:node.style.marginRight},nodeOffset=getElementOffset(node),parentOffset=getElementOffset(parentNode),parent={node:parentNode,css:{position:parentNode.style.position},computed:{position:parentComputedStyle.position},numeric:{borderLeftWidth:parseNumeric(parentComputedStyle.borderLeftWidth),borderRightWidth:parseNumeric(parentComputedStyle.borderRightWidth),borderTopWidth:parseNumeric(parentComputedStyle.borderTopWidth),borderBottomWidth:parseNumeric(parentComputedStyle.borderBottomWidth)}},el={node:node,box:{left:nodeOffset.win.left,right:html.clientWidth-nodeOffset.win.right},offset:{top:nodeOffset.win.top-parentOffset.win.top-parent.numeric.borderTopWidth,left:nodeOffset.win.left-parentOffset.win.left-parent.numeric.borderLeftWidth,right:-nodeOffset.win.right+parentOffset.win.right-parent.numeric.borderRightWidth},css:css,isCell:computedStyle.display=='table-cell',computed:computed,numeric:numeric,width:nodeOffset.win.right-nodeOffset.win.left,height:nodeOffset.win.bottom-nodeOffset.win.top,mode:-1,inited:!1,parent:parent,limit:{start:nodeOffset.doc.top-numeric.top,end:parentOffset.doc.top+parentNode.offsetHeight-parent.numeric.borderBottomWidth-node.offsetHeight-numeric.top-numeric.marginBottom}};return el}
function getDocOffsetTop(node){var docOffsetTop=0;while(node){docOffsetTop+=node.offsetTop;node=node.offsetParent}
return docOffsetTop}
function getElementOffset(node){var box=node.getBoundingClientRect();return{doc:{top:box.top+win.pageYOffset,left:box.left+win.pageXOffset},win:box}}
function startFastCheckTimer(){checkTimer=setInterval(function(){!fastCheck()&&rebuild()},500)}
function stopFastCheckTimer(){clearInterval(checkTimer)}
function handlePageVisibilityChange(){if(!initialized)return;if(document[hiddenPropertyName]){stopFastCheckTimer()}
else{startFastCheckTimer()}}
function init(){if(initialized)return;updateScrollPos();initAll();win.addEventListener('scroll',onScroll);win.addEventListener('wheel',onWheel);win.addEventListener('resize',rebuild);win.addEventListener('orientationchange',rebuild);doc.addEventListener(visibilityChangeEventName,handlePageVisibilityChange);startFastCheckTimer();initialized=!0}
function rebuild(){if(!initialized)return;deinitAll();for(var i=watchArray.length-1;i>=0;i--){watchArray[i]=getElementParams(watchArray[i].node)}
initAll()}
function pause(){win.removeEventListener('scroll',onScroll);win.removeEventListener('wheel',onWheel);win.removeEventListener('resize',rebuild);win.removeEventListener('orientationchange',rebuild);doc.removeEventListener(visibilityChangeEventName,handlePageVisibilityChange);stopFastCheckTimer();initialized=!1}
function stop(){pause();deinitAll()}
function kill(){stop();while(watchArray.length){watchArray.pop()}}
function add(node){for(var i=watchArray.length-1;i>=0;i--){if(watchArray[i].node===node)return};var el=getElementParams(node);watchArray.push(el);if(!initialized){init()}
else{initElement(el)}}
function remove(node){for(var i=watchArray.length-1;i>=0;i--){if(watchArray[i].node===node){deinitElement(watchArray[i]);watchArray.splice(i,1)}}}
win.Stickyfill={stickies:watchArray,add:add,remove:remove,init:init,rebuild:rebuild,pause:pause,stop:stop,kill:kill}})(document,window);if(window.jQuery){(function($){$.fn.Stickyfill=function(options){this.each(function(){Stickyfill.add(this)});return this}})(window.jQuery)}
'use strict';(function(global,factory){if(typeof define=='function'&&define.amd){define('ev-emitter/ev-emitter',factory)}else if(typeof module=='object'&&module.exports){module.exports=factory()}else{global.EvEmitter=factory()}}(this,function(){function EvEmitter(){}
var proto=EvEmitter.prototype;proto.on=function(eventName,listener){if(!eventName||!listener){return}
var events=this._events=this._events||{};var listeners=events[eventName]=events[eventName]||[];if(listeners.indexOf(listener)==-1){listeners.push(listener)}
return this};proto.once=function(eventName,listener){if(!eventName||!listener){return}
this.on(eventName,listener);var onceEvents=this._onceEvents=this._onceEvents||{};var onceListeners=onceEvents[eventName]=onceEvents[eventName]||[];onceListeners[listener]=!0;return this};proto.off=function(eventName,listener){var listeners=this._events&&this._events[eventName];if(!listeners||!listeners.length){return}
var index=listeners.indexOf(listener);if(index!=-1){listeners.splice(index,1)}
return this};proto.emitEvent=function(eventName,args){var listeners=this._events&&this._events[eventName];if(!listeners||!listeners.length){return}
var i=0;var listener=listeners[i];args=args||[];var onceListeners=this._onceEvents&&this._onceEvents[eventName];while(listener){var isOnce=onceListeners&&onceListeners[listener];if(isOnce){this.off(eventName,listener);delete onceListeners[listener]}
listener.apply(this,args);i+=isOnce?0:1;listener=listeners[i]}
return this};return EvEmitter}));(function(window,factory){'use strict';if(typeof define=='function'&&define.amd){define(['ev-emitter/ev-emitter'],function(EvEmitter){return factory(window,EvEmitter)})}else if(typeof module=='object'&&module.exports){module.exports=factory(window,require('ev-emitter'))}else{window.imagesLoaded=factory(window,window.EvEmitter)}})(window,function factory(window,EvEmitter){var $=window.jQuery;var console=window.console;function extend(a,b){for(var prop in b){a[prop]=b[prop]}
return a}
function makeArray(obj){var ary=[];if(Array.isArray(obj)){ary=obj}else if(typeof obj.length=='number'){for(var i=0;i<obj.length;i++){ary.push(obj[i])}}else{ary.push(obj)}
return ary}
function ImagesLoaded(elem,options,onAlways){if(!(this instanceof ImagesLoaded)){return new ImagesLoaded(elem,options,onAlways)}
if(typeof elem=='string'){elem=document.querySelectorAll(elem)}
this.elements=makeArray(elem);this.options=extend({},this.options);if(typeof options=='function'){onAlways=options}else{extend(this.options,options)}
if(onAlways){this.on('always',onAlways)}
this.getImages();if($){this.jqDeferred=new $.Deferred()}
setTimeout(function(){this.check()}.bind(this))}
ImagesLoaded.prototype=Object.create(EvEmitter.prototype);ImagesLoaded.prototype.options={};ImagesLoaded.prototype.getImages=function(){this.images=[];this.elements.forEach(this.addElementImages,this)};ImagesLoaded.prototype.addElementImages=function(elem){if(elem.nodeName=='IMG'){this.addImage(elem)}
if(this.options.background===!0){this.addElementBackgroundImages(elem)}
var nodeType=elem.nodeType;if(!nodeType||!elementNodeTypes[nodeType]){return}
var childImgs=elem.querySelectorAll('img');for(var i=0;i<childImgs.length;i++){var img=childImgs[i];this.addImage(img)}
if(typeof this.options.background=='string'){var children=elem.querySelectorAll(this.options.background);for(i=0;i<children.length;i++){var child=children[i];this.addElementBackgroundImages(child)}}};var elementNodeTypes={1:!0,9:!0,11:!0};ImagesLoaded.prototype.addElementBackgroundImages=function(elem){var style=getComputedStyle(elem);if(!style){return}
var reURL=/url\((['"])?(.*?)\1\)/gi;var matches=reURL.exec(style.backgroundImage);while(matches!==null){var url=matches&&matches[2];if(url){this.addBackground(url,elem)}
matches=reURL.exec(style.backgroundImage)}};ImagesLoaded.prototype.addImage=function(img){var loadingImage=new LoadingImage(img);this.images.push(loadingImage)};ImagesLoaded.prototype.addBackground=function(url,elem){var background=new Background(url,elem);this.images.push(background)};ImagesLoaded.prototype.check=function(){var _this=this;this.progressedCount=0;this.hasAnyBroken=!1;if(!this.images.length){this.complete();return}
function onProgress(image,elem,message){setTimeout(function(){_this.progress(image,elem,message)})}
this.images.forEach(function(loadingImage){loadingImage.once('progress',onProgress);loadingImage.check()})};ImagesLoaded.prototype.progress=function(image,elem,message){this.progressedCount++;this.hasAnyBroken=this.hasAnyBroken||!image.isLoaded;this.emitEvent('progress',[this,image,elem]);if(this.jqDeferred&&this.jqDeferred.notify){this.jqDeferred.notify(this,image)}
if(this.progressedCount==this.images.length){this.complete()}
if(this.options.debug&&console){console.log('progress: '+message,image,elem)}};ImagesLoaded.prototype.complete=function(){var eventName=this.hasAnyBroken?'fail':'done';this.isComplete=!0;this.emitEvent(eventName,[this]);this.emitEvent('always',[this]);if(this.jqDeferred){var jqMethod=this.hasAnyBroken?'reject':'resolve';this.jqDeferred[jqMethod](this)}};function LoadingImage(img){this.img=img}
LoadingImage.prototype=Object.create(EvEmitter.prototype);LoadingImage.prototype.check=function(){var isComplete=this.getIsImageComplete();if(isComplete){this.confirm(this.img.naturalWidth!==0,'naturalWidth');return}
this.proxyImage=new Image();this.proxyImage.addEventListener('load',this);this.proxyImage.addEventListener('error',this);this.img.addEventListener('load',this);this.img.addEventListener('error',this);this.proxyImage.src=this.img.src};LoadingImage.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth!==undefined};LoadingImage.prototype.confirm=function(isLoaded,message){this.isLoaded=isLoaded;this.emitEvent('progress',[this,this.img,message])};LoadingImage.prototype.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event)}};LoadingImage.prototype.onload=function(){this.confirm(!0,'onload');this.unbindEvents()};LoadingImage.prototype.onerror=function(){this.confirm(!1,'onerror');this.unbindEvents()};LoadingImage.prototype.unbindEvents=function(){this.proxyImage.removeEventListener('load',this);this.proxyImage.removeEventListener('error',this);this.img.removeEventListener('load',this);this.img.removeEventListener('error',this)};function Background(url,element){this.url=url;this.element=element;this.img=new Image()}
Background.prototype=Object.create(LoadingImage.prototype);Background.prototype.check=function(){this.img.addEventListener('load',this);this.img.addEventListener('error',this);this.img.src=this.url;var isComplete=this.getIsImageComplete();if(isComplete){this.confirm(this.img.naturalWidth!==0,'naturalWidth');this.unbindEvents()}};Background.prototype.unbindEvents=function(){this.img.removeEventListener('load',this);this.img.removeEventListener('error',this)};Background.prototype.confirm=function(isLoaded,message){this.isLoaded=isLoaded;this.emitEvent('progress',[this,this.element,message])};ImagesLoaded.makeJQueryPlugin=function(jQuery){jQuery=jQuery||window.jQuery;if(!jQuery){return}
$=jQuery;$.fn.imagesLoaded=function(options,callback){var instance=new ImagesLoaded(this,options,callback);return instance.jqDeferred.promise($(this))}};ImagesLoaded.makeJQueryPlugin();return ImagesLoaded});var ResizeSensor=function(element,callback){function EventQueue(){this.q=[];this.add=function(ev){this.q.push(ev)};var i,j;this.call=function(){for(i=0,j=this.q.length;i<j;i++){this.q[i].call()}}}
function getComputedStyle(element,prop){if(element.currentStyle){return element.currentStyle[prop]}else if(window.getComputedStyle){return window.getComputedStyle(element,null).getPropertyValue(prop)}else{return element.style[prop]}}
function attachResizeEvent(element,resized){if(!element.resizedAttached){element.resizedAttached=new EventQueue();element.resizedAttached.add(resized)}else if(element.resizedAttached){element.resizedAttached.add(resized);return}
element.resizeSensor=document.createElement('div');element.resizeSensor.className='resize-sensor';var style='position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;';var styleChild='position: absolute; left: 0; top: 0;';element.resizeSensor.style.cssText=style;element.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+style+'">'+'<div style="'+styleChild+'"></div>'+'</div>'+'<div class="resize-sensor-shrink" style="'+style+'">'+'<div style="'+styleChild+' width: 200%; height: 200%"></div>'+'</div>';element.appendChild(element.resizeSensor);if(!{fixed:1,absolute:1}[getComputedStyle(element,'position')]){element.style.position='relative'}
var expand=element.resizeSensor.childNodes[0];var expandChild=expand.childNodes[0];var shrink=element.resizeSensor.childNodes[1];var shrinkChild=shrink.childNodes[0];var lastWidth,lastHeight;var reset=function(){expandChild.style.width=expand.offsetWidth+10+'px';expandChild.style.height=expand.offsetHeight+10+'px';expand.scrollLeft=expand.scrollWidth;expand.scrollTop=expand.scrollHeight;shrink.scrollLeft=shrink.scrollWidth;shrink.scrollTop=shrink.scrollHeight;lastWidth=element.offsetWidth;lastHeight=element.offsetHeight};reset();var changed=function(){if(element.resizedAttached){element.resizedAttached.call()}};var addEvent=function(el,name,cb){if(el.attachEvent){el.attachEvent('on'+name,cb)}else{el.addEventListener(name,cb)}};addEvent(expand,'scroll',function(){if(element.offsetWidth>lastWidth||element.offsetHeight>lastHeight){changed()}
reset()});addEvent(shrink,'scroll',function(){if(element.offsetWidth<lastWidth||element.offsetHeight<lastHeight){changed()}
reset()})}
if("[object Array]"===Object.prototype.toString.call(element)||('undefined'!==typeof jQuery&&element instanceof jQuery)||('undefined'!==typeof Elements&&element instanceof Elements)){var i=0,j=element.length;for(;i<j;i++){attachResizeEvent(element[i],callback)}}else{attachResizeEvent(element,callback)}
this.detach=function(){ResizeSensor.detach(element)}};ResizeSensor.detach=function(element){if(element.resizeSensor){element.removeChild(element.resizeSensor);delete element.resizeSensor;delete element.resizedAttached}};(function($){$.px=function(val){return parseFloat($('html').css('font-size'))*val/16};$.humanTimeDiff=function(date){switch(typeof date){case 'number':date*=1000;case 'string':date=new Date(date);break}
var delta=((new Date).getTime()-date.getTime())/1000;if(delta<1){delta=0}
var time_diff={months:~~(delta/2592000),weeks:~~(delta/604800),days:~~(delta/86400),hours:~~(delta/3600),minutes:~~(delta/60),seconds:~~(delta)};var i18n=$.humanTimeDiff.i18n;if(time_diff.months>=2)
return i18n.monthsAgo.replace('%d',time_diff.months);if(time_diff.months>=1)
return i18n.monthAgo;if(time_diff.weeks>=2)
return i18n.weeksAgo.replace('%d',time_diff.weeks);if(time_diff.weeks>=1)
return i18n.weekAgo;if(time_diff.days>=2)
return i18n.daysAgo.replace('%d',time_diff.days);if(time_diff.days>=1)
return i18n.dayAgo;if(time_diff.hours>=2)
return i18n.hoursAgo.replace('%d',time_diff.hours);if(time_diff.hours>=1)
return i18n.hourAgo;if(time_diff.minutes>=2)
return i18n.minutesAgo.replace('%d',time_diff.minutes);if(time_diff.minutes>=1)
return i18n.minuteAgo;if(time_diff.seconds>=10)
return i18n.secondsAgo.replace('%d',time_diff.seconds);return i18n.now};$.humanTimeDiff.i18n={monthsAgo:'%d months ago',monthAgo:'1 month ago',weeksAgo:'%d weeks ago',weekAgo:'1 week ago',daysAgo:'%d days ago',dayAgo:'1 day ago',hoursAgo:'%d hours ago',hourAgo:'1 hour ago',minutesAgo:'%d mins ago',minuteAgo:'1 min ago',secondsAgo:'%d sec ago',now:'now'};$.fn.getData=function(key,defaultValue){return typeof this.data(key)!=='undefined'?this.data(key):defaultValue};$.fn.getDataArray=function(prefix){var
data={},re=new RegExp('^'+prefix+'([A-Z])');$.each(this.data(),function(key,value){if(re.test(key)){key=key.replace(re,'$1');key=key.charAt(0).toLowerCase()+key.slice(1);data[key]=value}});return data};$.fn.closestDescendant=function(selector,parentSelector){var _this=this;if(typeof parentSelector=='undefined'){parentSelector=selector}else{parentSelector+=', '+selector}
return this.find(selector).filter(function(){return $(this).parent().closest(parentSelector).is(_this)})};$.fn.changeTag=function(tag){var
replacement=$('<'+tag+'>'),attributes={},contents=this.children().clone(!0);$.each(this.get(0).attributes,function(index,attribute){attributes[attribute.name]=attribute.value});replacement.attr(attributes).data(this.data()).append(contents);this.replaceWith(replacement);return replacement}
$.fn.spinner=function(){var el=this;if(el.length==0){return this}
if(el.length>1){return el.each(function(){$(this).spinner()})}
el.addClass('sk-wave');for(var i=1;i<=5;i++){$('<span />',{class:'sk-rect sk-rect'+i}).appendTo(el)}
return this},$.fn.parallaxTransform=function(){var el=this;var init,refresh,win;win=$(window);init=function(){win.on('scroll resize',refresh);refresh()};refresh=function(){el.css('transform','translate3d(0, '+(-win.scrollTop()/2)+'px, 0)')};init();return this},$.fn.smoothScroll=function(options){var el=this;switch(typeof options){case 'undefined':options={};break}
el.options=$.extend({},{targetTop:null,speedCoefficient:8,preventDefault:!0},options);var html=$('html'),body=$('body');el.filter('[href*="#"]').click(function(event){var
target=$('#'+$(this).attr('href').split('#')[1]),scroll_top=Math.max(html.scrollTop(),body.scrollTop()),target_top=el.options.targetTop===null?Math.max(target.offset().top,0):el.options.targetTop;html.add(body).animate({scrollTop:target_top},Math.abs(scroll_top-target_top)/el.options.speedCoefficient);if(el.options.preventDefault){event.preventDefault()}});return this};$.fn.lazyShow=function(options){var el=this;switch(typeof options){case 'undefined':options={};break}
el.options=$.extend({},{forceHide:!1},options);var init,refresh,win,items;win=$(window);init=function(){var
win_top=win.scrollTop(),win_height=win.height();items=el.filter(function(){var item=$(this);return el.options.forceHide||item.offset().top>win_top+win_height}).addClass('lazy-show-hidden');el.imagesLoaded(function(){win.on('scroll resize',refresh);refresh()})};refresh=function(){var
win_top=win.scrollTop(),win_height=win.height();items.filter('.lazy-show-hidden').filter(function(){return $(this).offset().top<=win_top+win_height}).removeClass('lazy-show-hidden').addClass('lazy-show-visible')};init();return this};$.fn.countdown=function(){var el=this;var init,refresh,items;init=function(){items=el.filter(function(){return['object','number','string'].indexOf(typeof $(this).data('countdown-date'))>=0}).each(function(){var
item=$(this),date=item.data('countdown-date');switch(typeof date){case 'number':date*=1000;case 'string':date=new Date(date);break}
item.data('countdown-date',date)});items.filter(':not(:has(span))').wrapInner('<span />');setInterval(refresh,1000)};refresh=function(){items.each(function(){var
item=$(this),date=item.data('countdown-date');var delta=Math.round((date.getTime()-(new Date).getTime())/1000);if(delta<1){delta=0}
var time_diff={};time_diff.days=~~(delta/86400);time_diff.hours=~~((delta-time_diff.days*86400)/3600);time_diff.minutes=~~((delta-time_diff.days*86400-time_diff.hours*3600)/60);time_diff.seconds=delta%60;if(time_diff.days==0){delete time_diff.days}
time_diff=Object.keys(time_diff).map(function(i){return time_diff[i]<10?'0'+time_diff[i]:time_diff[i]});$('span',item).text(time_diff.join(time_diff.length>3?':':' : '))})};init();return this};$.fn.bricks=function(options,param){var el=this;if(el.length==0){return this}
if(el.length>1){return el.each(function(){$(this).bricks(options)})}
switch(typeof options){case 'string':var el=el.data('bricks');if(typeof el=='undefined'){return this}
return typeof el[options]=='function'?el[options](param):el[options];case 'undefined':options={};break}
el.options=$.extend({},{filter:!1,columns:4,minWidth:600/4,optimizeSpace:!1,refreshProgress:!1,precise:!0,},options);el.data('bricks',el);var init,filter,items,item,last_width,last_heights;init=function(){last_width=0;last_heights=[];items=$('<div />',{class:'bricks-items'});item=$('> *',el);el.addClass('bricks');if(el.options.filter){filter=$('<div />',{class:'bricks-filter'});var on_term_click=function(){var button=$(this);var term=button.attr('href').substring(1);el.filter(term=='__all'?!1:term);button.addClass('active').siblings().removeClass('active')};$.each(el.getTerms(),function(index,term){$('<a />',{href:'#'+term}).text(term).click(on_term_click).appendTo(filter)});if($('> *',filter).length>0){$('<a />',{href:'#__all',class:'active'}).text($.fn.bricks.i18n.all).click(on_term_click).prependTo(filter);filter.appendTo(el)}}
items.appendTo(el);item.addClass('bricks-item').appendTo(items);el.imagesLoaded().progress(function(){if(el.options.refreshProgress){el.addClass('ready');el.refresh()}}).always(function(){el.addClass('ready');el.refresh();$(window).resize(function(){var width=items.width();if(width!=last_width){el.refresh();last_width=width}});new ResizeSensor(item,el.refresh)})};el.refresh=function(){if(!el.hasClass('ready')){return el}
var columns=Math.max(Math.min(el.options.columns,Math.floor(items.width()/el.options.minWidth)),1),col_width=100/columns,heights=[],optimize=el.options.optimizeSpace&&columns>1,stack=Array.apply(null,Array(columns)).map(Number.prototype.valueOf,0),sort_key=optimize?'bricks-height':'bricks-index',_item=item.filter(':not(.hidden)');_item.each(function(){var
item=$(this),height;item.css('width',col_width+'%');height=el.options.precise?item[0].getBoundingClientRect().height:item.outerHeight();heights.push(height);item.data({'bricks-index':-item.index(),'bricks-height':height})});if(heights.length==last_heights.length&&heights.every(function(n,index){return n===last_heights[index]})){return el}
last_heights=heights;$.extend({},_item).sort(function(a,b){return $(b).data(sort_key)-$(a).data(sort_key)}).each(function(){var
item=$(this),col=stack.indexOf(Math.min.apply(null,stack));item.data('bricks-col',col);stack[col]+=item.data('bricks-height')});if(optimize){var i=0;do{var
col_min=stack.indexOf(Math.min.apply(null,stack)),col_max=stack.indexOf(Math.max.apply(null,stack)),height_diff=stack[col_max]-stack[col_min],match=null,_item_min=_item.filter(function(){return $(this).data('bricks-col')==col_min}),_item_max=_item.filter(function(){return $(this).data('bricks-col')==col_max});_item_max.each(function(){var item_max=$(this);_item_min.each(function(){var
item_min=$(this),diff=item_max.data('bricks-height')-item_min.data('bricks-height');if(diff>0&&diff<height_diff){var dist=Math.abs(height_diff/2-diff);if(match===null||dist<match.dist){match={dist:dist,diff:diff,item_min:item_min,item_max:item_max}}}})});if(match===null){break}
match.item_min.data('bricks-col',col_max);match.item_max.data('bricks-col',col_min);stack[col_min]+=match.diff;stack[col_max]-=match.diff}while(++i<columns)}
stack=stack.map(Number.prototype.valueOf,0);_item.each(function(){var
item=$(this),col=item.data('bricks-col');item.css({top:stack[col],left:col_width*col+'%'});stack[col]+=item.data('bricks-height')});items.css('height',Math.ceil(Math.max.apply(null,stack)));return el};el.filter=function(term){item.each(function(){var
item=$(this),terms=item.data('bricks-terms');item.toggleClass('hidden',term&&(typeof terms=='undefined'||terms.indexOf(term)==-1))});el.refresh();return el};el.getTerms=function(){var terms=[];item.each(function(){var _terms=$(this).data('bricks-terms');if(typeof _terms!='undefined'){$.merge(terms,$.grep(_terms,function(term){return terms.indexOf(term)==-1}))}});terms.sort();return terms};init();return this};$.fn.bricks.i18n={all:'All'};$.fn.slideshow=function(options){var el=this;if(el.length==0){return this}
if(el.length>1){return el.each(function(){$(this).slideshow(options)})}
switch(typeof options){case 'string':var el=el.data('slideshow');if(typeof el=='undefined'){return this}
return typeof el[options]=='function'?el[options]():el[options];case 'undefined':options={};break}
el.options=$.extend({},{interval:2},options);el.data('slideshow',el);var init,images;init=function(){images=$('img',el);if(images.filter('.active').length==0){images.eq(0).addClass('active')}
images.imagesLoaded(function(){el.addClass('ready');setInterval(el.nextSlide,Math.max(el.options.interval,1)*1000)})};el.nextSlide=function(){var
active=images.filter('.active'),next=images.eq(active.index()==images.length-1?0:active.index()+1);active.removeClass('active');next.addClass('active');return el};init();return this},$.fn.broadcast=function(options){var el=this;if(el.length==0){return this}
if(el.length>1){return el.each(function(){$(this).broadcast(options)})}
switch(typeof options){case 'string':var el=el.data('broadcast');if(typeof el=='undefined'){return this}
return typeof el[options]=='function'?el[options]():el[options];case 'undefined':options={};break}
el.options=$.extend({},{url:'',interval:30,limit:100,id:0,data:{},onUpdate:function(el,data){},onRefresh:function(el){},onEntry:function(el){}},options);if(typeof $.fn.broadcast.instances=='undefined'){$.fn.broadcast.instances=[]}
$.fn.broadcast.instances.push(el);el.data('broadcast',el);var init,addEntry,title,page_title,id,unread;addEntry=function(timestamp,content){var
date=new Date(timestamp*1000),entry=$('<div />',{class:'entry hidden'}),_timestamp=$('<span />',{class:'timestamp'}),_content=$('<div />',{class:'content'});_timestamp.text($.humanTimeDiff(date));_content.html(content);entry.data('broadcast-timestamp',date).append(_timestamp,_content).prependTo(el);unread++};init=function(){title=$('head title');page_title=title.text();id=el.options.id;unread=0;if(el.options.url){setInterval(el.refresh,1000);el.update()}};el.update=function(){$.ajax(el.options.url,{method:'POST',data:$.extend({id:id,interval:el.options.interval,limit:el.options.limit},el.options.data),dataType:'json',success:function(data){if(data===null||typeof data.time=='undefined'||typeof data.entries=='undefined'){return}
var time_diff=Math.round((new Date).getTime()/1000)-data.time;data.entries.sort(function(a,b){return a.id-b.id});$.each(data.entries,function(index,entry){id=Math.max(id,entry.id);addEntry(entry.timestamp+time_diff,entry.content)});el.options.onUpdate(el,data);$(document).trigger('broadcast:update',[el,data])},complete:function(){setTimeout(el.update,el.options.interval*1000)}});return el};el.refresh=function(){var
win=$(window),entries=$('.entry',el);entries.each(function(){var
entry=$(this),time_diff=$.humanTimeDiff(entry.data('broadcast-timestamp'));$('.timestamp',entry).text(time_diff)});if(entries.filter('.hidden').length>0&&document.hasFocus()&&el.offset().top+Math.min(el.height(),$.px(400))>win.scrollTop()&&el.offset().top<win.scrollTop()+win.height()){entries.removeClass('hidden');entries.filter(function(index){return index>=el.options.limit}).each(function(){var entry=$(this);entry.addClass('deleted');setTimeout(function(){entry.remove()},2000)});el.options.onEntry(el);$(document).trigger('broadcast:entry',[el]);unread=0}
if($.fn.broadcast.instances.indexOf(el)==0){title.text(unread>0?'('+Math.min(unread,el.options.limit)+') '+page_title:page_title)}
el.options.onRefresh(el);$(document).trigger('broadcast:refresh',[el]);return el};init();return this};$.fn.twitter=function(options){var el=this;if(el.length==0){return this}
if(el.length>1){return el.each(function(){$(this).bricks(options)})}
switch(typeof options){case 'string':var el=el.data('twitter');if(typeof el=='undefined'){return this}
return typeof el[options]=='function'?el[options]():el[options];case 'undefined':options={};break}
el.options=$.extend({},{url:'',username:'',includeRetweets:!0,excludeReplies:!1,count:5,data:{},onUpdate:function(el,data){}},options);el.data('twitter',el);var init,list;init=function(){list=$('<ul />');list.appendTo(el);if(el.options.url&&el.options.username){el.update()}};el.update=function(){$.ajax(el.options.url,{method:'POST',data:$.extend({username:el.options.username,include_retweets:el.options.includeRetweets,exclude_replies:el.options.excludeReplies,count:el.options.count},el.options.data),dataType:'json',success:function(data){if(data===null||typeof data.tweets=='undefined'){return}
list.empty();$.each(data.tweets,function(index,tweet){var
li=$('<li />'),timestamp=$('<a />',{class:'timestamp'}),content=$('<div />',{class:'content'});timestamp.attr('href',tweet.url).text($.humanTimeDiff(new Date(tweet.date*1000))).appendTo(li);content.html(tweet.html).appendTo(li);li.appendTo(list)});el.options.onUpdate(el,data);$(document).trigger('twitter:update',[el,data])}});return el};init();return this};$.fn.postLoader=function(options){var el=this;if(el.length==0){return this}
if(el.length>1){return el.each(function(){$(this).postLoader(options)})}
switch(typeof options){case 'string':var el=el.data('post-loader');if(typeof el=='undefined'){return this}
return typeof el[options]=='function'?el[options]():el[options];case 'undefined':options={};break}
el.options=$.extend({},{url:'',count:10,id:0,data:{},onLoad:function(el,data){}},options);el.data('post-loader',el);var init,addPost,win,posts,control,id;win=$(window);addPost=function(content){posts.append(content)};init=function(){posts=$('<div />',{class:'post-loader-posts empty'});control=$('.post-loader-control',el);id=el.options.id;posts.prependTo(el);$('<span />',{class:'label'}).text($.fn.postLoader.i18n.loadMore).appendTo(control);$('<span />',{class:'spinner'}).spinner().appendTo(control);if(el.options.url){control.click(function(){if(!$(this).hasClass('disabled')){el.load()}})}};el.load=function(){control.addClass('disabled');$.ajax(el.options.url,{method:'POST',data:$.extend({id:id,count:el.options.count},el.options.data),dataType:'json',success:function(data){if(data===null){return}
if(typeof data.posts=='undefined'){control.removeClass('disabled');return}
posts.css('height',posts.height());data.posts.sort(function(a,b){return b.id-a.id});$.each(data.posts,function(index,post){id=Math.min(id,post.id);addPost(post.content)});posts.imagesLoaded(function(){var
last=$('> :last-child',posts),height=last.length>0?last.position().top+last.outerHeight(!0):0,scroll=win.scrollTop();if(data.posts.length>0){posts.removeClass('empty')}
posts.css('height',height);win.scrollTop(scroll-0.1);setTimeout(function(){if(data.posts.length<el.options.count){el.addClass('no-posts')}
posts.css('height','auto');control.removeClass('disabled')},1000);el.options.onLoad(el,data);$(document).trigger('post_loader:load',[el,data])})},error:function(){control.removeClass('disabled')}});return el};init();return this};$.fn.postLoader.i18n={loadMore:'load more'}})(jQuery);var Live;(function($){Live=function(config){var _this=this;if(typeof config=='undefined'){config={}}
this.config=$.extend({},{debug:!1,simpleIconsPath:'components/simple-icons',simpleLightboxOptions:{widthRatio:0.9,heightRatio:0.95}},config);$(document).ready(function(){_this.init()})};Live.prototype={config:{},shareIconsDeffered:{},constructor:Live,init:function(){var
_this=this,root=$('html');root.removeClass('no-js').addClass('js');if('ontouchstart' in window||'ontouchstart' in document.documentElement){root.removeClass('no-touch').addClass('touch')}
this.initDOM(root)},initDOM:function(context,ajax){if(typeof context=='undefined'){context=$('html')}
if(typeof ajax=='undefined'){ajax=!1}
var _this=this;$('body',context).each(function(){var body=$(this);$('> .background-parallax',body).parallaxTransform()});$('.holder',context).filter('.sidebar-left, .sidebar-right').each(function(){var
holder=$(this),sidebar=$('.holder-sidebar',holder);$('.holder-content, .holder-sidebar',holder).Stickyfill();$(window).load(Stickyfill.rebuild);setInterval(function(){if(document.hasFocus()){Stickyfill.rebuild()}},1000);sidebar.bricks({columns:2,minWidth:270,optimizeSpace:!0,precise:!1})});$('.holder-bricks',context).each(function(){var holder=$(this);holder.bricks({columns:holder.getData('holder-columns',2),minWidth:holder.getData('holder-min-width',420),refreshProgress:!0,precise:!1})});$('#header',context).each(function(){var
header=$(this),main=$('.main',header),nav=$('nav',header);$('a[href="#"]',nav).click(function(event){event.preventDefault()});$('li:has(> ul)',nav).addClass('has-sub-menu');if($('html').hasClass('touch')){$('li.has-sub-menu > a',nav).click(function(event){var sub_menu=$(this).next('ul');if(sub_menu.css('visibility')=='hidden'){event.preventDefault()}})}
$(document).on('mouseenter','#header nav li.has-sub-menu',function(){var
li=$(this),sub_menu=$('> ul',li);sub_menu.toggleClass('right',li.offset().left+li.width()+sub_menu.outerWidth(!0)<=$(window).width())});if(main.is('.horizontal-align-center')&&nav.length==1){var
li=$('> ul > li',nav),li_half=li.filter(function(index){return index>=Math.floor(li.length/2)}),sec_nav=$('<nav />');sec_nav.append('<ul />').find('> ul').append(li_half.clone());if(nav.is('[class]')){sec_nav.addClass(nav.attr('class'))}
nav.after(sec_nav);li_half.addClass('media-regular-none-important')}});$('#footer',context).each(function(){var
footer=$(this),refresh;refresh=function(){footer.parent().css('padding-bottom',footer.outerHeight())};$(window).on('resize load',refresh);refresh();$('.end-note .back',footer).smoothScroll({targetTop:0})});$('[data-svg]:not(:has(svg))',context).each(function(){var el=$(this);$.get(el.data('svg'),function(data){var svg=$('svg',data).removeAttr('xmlns:a');el.append(svg)})});$('input[type="button"], input[type="reset"], input[type="submit"]',context).each(function(){var submit=$(this);submit.changeTag('button').text(submit.val()).removeAttr('value')});$('button, .button',context).each(function(){var button=$(this);if(!button.is(':has(span)')){button.wrapInner('<span />');$('span',button).attr('data-hover',button.text());if(button.is('[type="submit"], .spinner')){$('<div />',{class:'spinner'}).spinner().appendTo(button)}}});$('.gallery',context).each(function(){var
gallery=$(this),columns=gallery.getData('gallery-columns',4);gallery.bricks({columns:columns,minWidth:gallery.getData('gallery-min-width',600/columns)});$('a',gallery).simpleLightbox(_this.config.simpleLightboxOptions)});$('.photostream',context).each(function(){var
photostream=$(this),items=$('.items',photostream);$('a',items).simpleLightbox(_this.config.simpleLightboxOptions)});$('.slideshow',context).each(function(){var slideshow=$(this);slideshow.slideshow(slideshow.getDataArray('slideshow'))});$('.tag-countdown',context).countdown();$('.broadcast',context).each(function(){var broadcast=$(this);broadcast.broadcast(broadcast.getDataArray('broadcast'))});$('.twitter',context).each(function(){var twitter=$(this);twitter.twitter(twitter.getDataArray('twitter'))});$('.share a[href]:not([data-hover]):not(:has(svg))',context).each(function(){var
a=$(this),icon=a.getData('icon',!1);if(!icon||icon=='auto'){var
href=a.attr('href'),url;if(href.indexOf('mailto:')==0){icon='email'}else if(href.indexOf('//plus.google.com')>-1){icon='googleplus'}else if(href.match(/\/\/(www\.)?last\.fm/)){icon='lastfm'}else if(href.match(/\/\/(www\.)?steamcommunity\.com/)){icon='steam'}else if(url=href.match(/[\.\/]([a-z0-9]+)\.(com|net|org|co|fm|io|tv)\b/)){icon=url[1]}else{return}
a.attr('data-icon',icon)}
if(typeof _this.shareIconsDeffered[icon]=='undefined'){_this.shareIconsDeffered[icon]=$.get(_this.config.simpleIconsPath+'/'+icon+'.svg').done(function(data){$('svg',data).removeAttr('xmlns:a')})}
_this.shareIconsDeffered[icon].done(function(data){var svg=$('svg',data);a.append(svg.clone(),svg.clone())})});$('.embed',context).each(function(){var
embed=$(this),ratio=embed.getData('embed-ratio',!1),child=$('> iframe, > embed, > object',embed);if(ratio){embed.css('padding-bottom',(100/parseFloat(ratio))+'%')}else if(child.length>0&&child.is('[width][height]')){embed.css('padding-bottom',(100*child.attr('height')/child.attr('width'))+'%')}});$('.contact-form',context).submit(function(event){var
cf=$(this),data=cf.serialize(),inputs=$('input[type!="hidden"], textarea',cf),submit=$('[type="submit"]',cf),message=$('.contact-form-message',cf);inputs.prop('disabled',!0);submit.prop('disabled',!0);message.text('');$.ajax({url:cf.attr('action'),type:'POST',data:data,dataType:'json',success:function(data){if(data===null){submit.addClass('error')}else{if(data.result){inputs.val('')}
message.text(data.message)}},error:function(){submit.addClass('error')},complete:function(){inputs.prop('disabled',!1);submit.prop('disabled',!1)}});event.preventDefault()});$('.modal[id]',context).each(function(){var
overlay=$('.modal-overlay'),modal=$(this),id=modal.attr('id'),open,close;open=function(){overlay.addClass('visible');modal.addClass('opened')};close=function(){overlay.removeClass('visible');$('.modal[id]',context).removeClass('opened')};if(overlay.length==0){overlay=$('<div />',{class:'modal-overlay'});overlay.click(close).prependTo('body')}
$('body').on('click','a[href="#'+id+'"]',function(event){open();event.preventDefault()})
$('.close',modal).click(close)});$('.post-loader',context).each(function(){var
pl=$(this),posts_count=0;pl.postLoader($.extend({},pl.getDataArray('postLoader'),{onLoad:function(el){var
posts=$('.post-loader-posts .box-post',el),new_posts=posts.filter(function(index){return index>=posts_count});posts_count=posts.length;_this.initDOM(new_posts,!0)}}))});(function(){var
boxes=context.filter('.box-post, .box-page').add('.box-post, .box-page',context),posts=boxes.filter('.box-post');posts.lazyShow({forceHide:ajax});boxes.each(function(){var
box=$(this),featured_gallery=$('.featured-gallery',box),tags=$('.box-beta .tags:first-child',box),refresh;$('a',featured_gallery).simpleLightbox(_this.config.simpleLightboxOptions);refresh=function(){featured_gallery.css('width','auto').css('width',$('img:eq(0)',featured_gallery).width())};$(window).on('resize load',refresh);if(box.is('.box-page')){$('a[href$="#comments"]',tags).smoothScroll()}
$('.box-content a:has(img)',box).filter(function(){return $(this).parentsUntil('.box-content','.gallery').length==0}).simpleLightbox(_this.config.simpleLightboxOptions)})})()}}})(jQuery)